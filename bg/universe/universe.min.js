/**
 * universe-bg
 * @version v0.2.2 - 2016-09-14
 * @link http://html5beta.com/apps/universe.html
 * @author ZHAO Xudong (zxdong@gmail.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Universe=t():e.Universe=t()}(this,function(){return function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}([function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(){function e(t){n(this,e),this.init(t),this.animate(),this.event()}return a(e,[{key:"init",value:function(t){var n=t||{},a=this;a.options={size:n.size||e.defaults.size,id:n.id,starNumber:n.starNumber||e.defaults.starNumber,color:n.color||e.defaults.color,map:n.map},a.container=n.container||document.body,n=a.options,a.state={mouseX:0,mouseY:0,width:n.width||a.container.clientWidth,height:n.height||a.container.clientHeight,windowHalfX:a.container.clientWidth/2,windowHalfY:a.container.clientHeight/2},a.scene=new THREE.Scene,a.camera=new THREE.PerspectiveCamera(50,a.state.width/a.state.height,150,4e3);for(var o=new THREE.Geometry,i=0;i<n.starNumber;i++){var r=new THREE.Vector3;r.x=THREE.Math.randFloatSpread(4e3),r.y=THREE.Math.randFloatSpread(4e3),r.z=THREE.Math.randFloatSpread(4e3),o.vertices.push(r)}var s=new THREE.Points(o,new THREE.PointsMaterial({color:n.color,size:n.size,map:a.options.map||null,transparent:!0}));a.scene.add(s),a.renderer=new THREE.WebGLRenderer({antialias:!0}),a.renderer.setPixelRatio(window.devicePixelRatio),a.renderer.setSize(a.state.width,a.state.height),a.renderer.domElement.id=n.id||"id"+(new Date).getTime(),a.container.appendChild(a.renderer.domElement),a.renderer.autoClear=!1}},{key:"render",value:function(){var e=5e-4*Date.now(),t=this,n=t.state.height/500*.02,a=t.state.width/1e3*.02;t.camera.fov=35+90*Math.sin(.5*e),t.camera.updateProjectionMatrix(),t.camera.position.x+=(t.state.mouseX-t.camera.position.x)*n,t.camera.position.y+=(-t.state.mouseY-t.camera.position.y)*a,t.camera.lookAt(t.scene.position),t.renderer.clear(),t.renderer.setViewport(0,0,t.state.width,t.state.height),t.renderer.render(t.scene,t.camera)}},{key:"animate",value:function t(){function t(){requestAnimationFrame(t),e.render()}var e=this;t()}},{key:"event",value:function(){var e=this;document.addEventListener("mousemove",e.onDocumentMouseMove(),!1),document.addEventListener("touchstart",e.onDocumentTouchStart(),!1),document.addEventListener("touchmove",e.onDocumentTouchMove(),!1),window.addEventListener("resize",e.onWindowResize(),!1)}},{key:"onDocumentMouseMove",value:function(){var e=this;return function(t){e.state.mouseX=t.clientX-e.state.windowHalfX,e.state.mouseY=t.clientY-e.state.windowHalfY}}},{key:"onDocumentTouchStart",value:function(){var e=this;return function(t){1===t.touches.length&&(t.preventDefault(),e.state.mouseX=t.touches[0].pageX-e.state.windowHalfX,e.state.mouseY=t.touches[0].pageY-e.state.windowHalfY)}}},{key:"onDocumentTouchMove",value:function(){var e=this;return function(t){1===t.touches.length&&(t.preventDefault(),e.state.mouseX=t.touches[0].pageX-e.state.windowHalfX,e.state.mouseY=t.touches[0].pageY-e.state.windowHalfY)}}},{key:"onWindowResize",value:function(){var e=this;return function(){e.state.width=e.container.clientWidth,e.state.height=e.container.clientHeight,e.state.windowHalfX=e.container.clientWidth/2,e.state.windowHalfY=e.container.clientHeight/2,e.renderer.setSize(e.state.width,e.state.height),e.camera.aspect=e.state.width/e.state.height,e.camera.updateProjectionMatrix()}}}]),e}();o.defaults={size:5,starNumber:1e4,color:16777215},t["default"]=o}])});
//# sourceMappingURL=universe.min.js.map